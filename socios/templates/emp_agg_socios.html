{% extends 'base.html' %}
{% load static %}

{% block content %}
<!DOCTYPE html>
<!DOCTYPE html>
<html>

<head>
    <title>Agregar Socio</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
        }

        .header {
            background-color: #34b234;
            color: #fff;
            padding: 15px;
            text-align: center;
        }

        .header h1 {
            font-size: 18px;
            font-weight: bold;
            margin: 0;
        }

        .content {
            margin: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 70px);
        }

        .form-container {
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 600px;
        }

        .form-container label {
            display: block;
            margin-bottom: 10px;
            width: max-content;
        }

        .form-container input[type="text"],
        .form-container input[type="email"],
        .form-container input[type="tel"],
        .form-container input[type="date"],
        .form-container input[type="file"],
        .form-container input[type="submit"],
        .form-container input[type="button"],
        .form-container select,
        .form-container button,
        .input#file-upload-button {
            width: 95%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .form-container input[type="submit"],
        .form-container input[type="button"],
        .form-container button,
        .input#file-upload-button {
            background-color: #34b234;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .form-container input[type="submit"]:hover,
        .form-container input[type="button"]:hover,
        .form-container button:hover,
        .input#file-upload-button {
            background-color: #62c562;
        }

        .upload-preview {
            margin-bottom: 10px;
            height: auto;
            width: max-content;
            border: 1px solid #62c562;
            position: center;
        }

        .upload-preview p {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .upload-preview img {
            max-width: 200px;
            display: block;
            margin-top: 10px;
        }

        .generated-credentials {

            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #62c562;
            background-color: white;
            display: block;
            position: relative;
            text-align: center;
        }

        .generated-credentials p {
            margin: 10px;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>Agregar Socio</h1>
    </div>
    <div class="content">
        <div class="form-container">
            <form id="socio-form" action="/guardar_socio/" method="POST" enctype="multipart/socio-form">
                {% csrf_token %}

                <label for="nombres">Nombre:</label>
                <input type="text" id="nombres" name="nombres" required>

                <label for="apellidos">Apellido:</label>
                <input type="text" id="apellidos" name="apellidos" required>

                <label for="cedula">Cedula:</label>
                <input type="text" pattern="[0-9]{10}" maxlength="10" inputmode="numeric" id="cedula" name="cedula" required>

                <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
                <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required>

                <label for="lugar_nacimiento">Lugar de Nacimiento:</label>
                <input type="text" id="lugar_nacimiento" name="lugar_nacimiento" required>



                <label for="correo_electronico">Correo Electrónico:</label>
                <input type="email" id="correo_electronico" name="correo_electronico" required>

                <label for="numero_telefonico">Teléfono:</label>
                <input type="tel" id="numero_telefonico" name="numero_telefonico" required>

                <label for="numero_convencional">Teléfono Convencional:</label>
                <input type="tel" id="numero_convencional" name="numero_convencional" required>

                <label for="direccion_domiciliaria">Dirección Domiciliaria:</label>
                <input type="text" id="direccion_domiciliaria" name="direccion_domiciliaria" required>

                <label for="facultad">Facultad:</label>
                <select id="facultad" name="facultad" required placeholder="Seleccione la facultad" style="width:100%;">
                    <option value="">Seleccionar Facultad</option>
                    <option value="FCI">FACULTAD DE CIENCIAS DE LA INGENIERIA</option>
                    <option value="FCE">FACULTAD DE CIENCIAS DE LA EDUCACION</option>
                    <option value="FCA">FACULTAD DE CIENCIAS AGRICOLAS</option>
                </select>
                <label for="categoria">Categoría:</label>
                <select id="categoria" name="categoria" required style="width:100%;">
                    <option value="">Seleccionar Categoría</option>
                    <option value="Titular">Titular</option>
                    <option value="Contratado">Contratado</option>

                </select>
                <label for="dedicacion_academica">Dedicación Académica:</label>
                <select id="dedicacion" name="dedicacion_academica" required style="width:100%;">
                    <option value="">Seleccionar Dedicación</option>
                    <option value="INGENIERIA">INGENIERIA</option>
                    <option value="LICENCIATURA">LICENCIATURA
                    </option>

                </select>


                <label for="fecha_ingreso">Fecha de Ingreso a la Universidad:</label>
                <input type="date" id="fecha_ingreso" name="fecha_ingreso" required>

                <label for="titulo">Título:</label>
                <input type="text" id="titulo" name="titulo" required>

                <label for="foto">Agregar foto de Perfil:</label>
                <div class="upload-preview">
                    <div id="imagePreview"></div>

                </div>

                <div class="file-input">
                    <input type="file" id="foto" name="foto" onchange="previewImage(event)"
                      style="width: 70px;">
                </div>

                <br>

                <div class="generated-credentials">

                    <input type="text" id="usuario" name="usuario" value="{{ socio.usuario }}" required>
                    <input type="text" id="password" name="password" value="{{ socio.password }}" required>
       
                    <button type="button" id="generate-credentials" style="width: 50%; margin-bottom: 10px;">Generar
                        Credenciales</button>

                </div>

                <input type="hidden" id="aporte" name="aporte" value="{{ socio.aporte }}" value="13">

                <input type="submit" value="Agregar Socio" style="width: 100%;">
                <a href="/socios"> <input type="button" value="Cancelar"
                        style="width: 100%; background-color: red;"></a>

            </form>
        </div>
    </div>
    <script>
        // Generar usuario y contraseña al hacer clic en el botón
        const generateCredentialsButton = document.getElementById('generate-credentials');
        generateCredentialsButton.addEventListener('click', function () {
            // Generar usuario
            const nombre = document.getElementById('nombres').value;
            const apellido = document.getElementById('apellidos').value;
            const indiceEspacio = apellido.indexOf(' ');

            const usuario = (nombre.charAt(0) + apellido.substring(0, indiceEspacio)).toLowerCase();

            // Generar contraseña
            const caracteres = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let contrasena = '';
            for (let i = 0; i < 8; i++) {
                const randomIndex = Math.floor(Math.random() * caracteres.length);
                contrasena += caracteres.charAt(randomIndex);
            }

            // Mostrar usuario y contraseña generados
            const generatedUsername = document.getElementById('usuario');
            const generatedPassword = document.getElementById('password');
            generatedUsername.value = usuario;
            generatedPassword.value = contrasena;

        });
    </script>
    <script>
        function previewImage(event) {
            var reader = new FileReader();
            reader.onload = function () {
                var imagePreview = document.getElementById('imagePreview');
                imagePreview.innerHTML = '<img src="' + reader.result + '" style="width: 100%;">';
            };
            reader.readAsDataURL(event.target.files[0]);
        }
    </script>
</body>

</html>






{% endblock %}